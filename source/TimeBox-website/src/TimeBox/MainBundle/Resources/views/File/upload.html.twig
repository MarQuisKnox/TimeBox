{% extends "TimeBoxMainBundle::layout.html.twig" %}

{% block container %}
    <h3>Upload File</h3>

    <div class="col-xs-6 col-sm-4">
        <form class="upload" action="#" method="post" {{ form_enctype(form) }}>

            <div class="form-group">
                {{ form_label(form.uploadedFile, "File", { 'label_attr': { 'class': 'sr-only' } }) }}
                {{ form_errors(form.uploadedFile, { 'attr': {'class': 'alert alert-danger'} }) }}
                {{ form_widget(form.uploadedFile, { 'attr': {'placeholder': 'File'} }) }}
            </div>
            <div class="form-group">
                <label class="sr-only" for="form_name">Comment</label>
                <input id="form_name" class="form-control" type="text" name="name" placeholder="Name"/>
            </div>
            <div class="form-group">
                {{ form_label(form.comment, "Comment", { 'label_attr': { 'class': 'sr-only' } }) }}
                {{ form_errors(form.comment, { 'attr': {'class': 'alert alert-danger'} }) }}
                {{ form_widget(form.comment, { 'attr': {'class': 'form-control', 'placeholder': 'Comment'} }) }}
            </div>
            <div class="form-group">
                {{ form_widget(form) }}
                <input type="hidden" name="folderId" value="{{ folderId }}" />
                <input class="btn btn-primary" type="submit" value="Upload Media" />
            </div>
        </form>
    </div>

{% endblock %}

{% block javascripts %}
{{ parent() }}
<script type="text/javascript">
    $("form.upload").submit(function() {
        var filename = $("input[name=name]").val();
        var pattern = new RegExp("^[a-zA-Z0-9_\-]+$") ;
        if (!pattern.test(filename)) {
            alert("Error in the file name !");
            return false;
        }
    });
</script>
{% endblock %}
